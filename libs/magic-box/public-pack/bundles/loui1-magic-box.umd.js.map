{"version":3,"file":"loui1-magic-box.umd.js","sources":["../../src/lib/magic-btn/magic-btn.component.ts","../../src/lib/magic-box.module.ts","../../src/loui1-magic-box.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n} from '@angular/core';\nimport * as dayjs from 'dayjs';\n@Component({\n  selector: 'lib-magic-btn',\n  templateUrl: './magic-btn.component.html',\n  styleUrls: ['./magic-btn.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MagicBtnComponent {\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  @Input() laughText = 'HaHa';\n  @Input() probability = 100;\n\n  isHover = false;\n  isLeave = true;\n  translate = '';\n  btnTranslate = '';\n  movePosX: 'left' | 'right' | null = null;\n  movePosY: 'top' | 'bottom' | null = null;\n\n  private day = dayjs().format('YYYY-MM-DD HH:mm');\n\n  private check(): boolean {\n    return Math.random() * 100 < this.probability;\n  }\n\n  setIsHover(isHover: boolean): void {\n    this.isHover = isHover;\n    if (isHover && this.check()) {\n      this.movePosX = null;\n      this.movePosY = null;\n      this.isLeave = false;\n      this.movePosX = ['left', 'right'][~~(Math.random() * 2)] as\n        | 'left'\n        | 'right';\n      this.movePosY = ['top', 'bottom'][~~(Math.random() * 2)] as\n        | 'top'\n        | 'bottom';\n      setTimeout(() => {\n        const translateX = `${this.movePosX === 'left' ? '-' : ''}`;\n        const translateY = `${this.movePosY === 'top' ? '-' : ''}`;\n        this.btnTranslate = `translate(${translateX}${\n          50 + Math.random() * 50\n        }%, ${translateY}${50 + Math.random() * 50}%)`;\n        this.cdRef.markForCheck();\n        setTimeout(() => {\n          this.translate =\n            `translate(${translateX}50%, ${translateY}100%) ` +\n            `rotate(${\n              (this.movePosX === 'left' && this.movePosY === 'top') ||\n              (this.movePosX === 'right' && this.movePosY === 'bottom')\n                ? '-'\n                : ''\n            }30deg) ` +\n            `scale(1)`;\n          this.cdRef.markForCheck();\n        }, 500);\n      }, 10);\n      console.log(`按鈕在 ${this.day} 閃過了你${this.laughText ? `，${this.laughText}`: ''}`);\n    } else {\n      this.isLeave = true;\n      this.translate = '';\n      this.btnTranslate = '';\n      setTimeout(() => {\n        if (this.isLeave) {\n          this.movePosX = null;\n          this.movePosY = null;\n          this.cdRef.markForCheck();\n        }\n      }, 300);\n    }\n  }\n}\n\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MagicBtnComponent } from './magic-btn/magic-btn.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    MagicBtnComponent\n  ],\n  exports: [\n    MagicBtnComponent\n  ],\n})\nexport class MagicBoxModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["dayjs","Component","ChangeDetectionStrategy","ChangeDetectorRef","Input","NgModule","CommonModule"],"mappings":"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"}