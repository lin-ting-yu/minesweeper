{"version":3,"file":"loui1-magic-box.js","sources":["../../src/lib/magic-btn/magic-btn.component.ts","../../src/lib/magic-box.module.ts","../../src/loui1-magic-box.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n} from '@angular/core';\nimport * as dayjs from 'dayjs';\n@Component({\n  selector: 'lib-magic-btn',\n  templateUrl: './magic-btn.component.html',\n  styleUrls: ['./magic-btn.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MagicBtnComponent {\n  constructor(private cdRef: ChangeDetectorRef) {}\n\n  @Input() laughText = 'HaHa';\n  @Input() probability = 100;\n\n  isHover = false;\n  isLeave = true;\n  translate = '';\n  btnTranslate = '';\n  movePosX: 'left' | 'right' | null = null;\n  movePosY: 'top' | 'bottom' | null = null;\n\n  private day = dayjs().format('YYYY-MM-DD HH:mm');\n\n  private check(): boolean {\n    return Math.random() * 100 < this.probability;\n  }\n\n  setIsHover(isHover: boolean): void {\n    this.isHover = isHover;\n    if (isHover && this.check()) {\n      this.movePosX = null;\n      this.movePosY = null;\n      this.isLeave = false;\n      this.movePosX = ['left', 'right'][~~(Math.random() * 2)] as\n        | 'left'\n        | 'right';\n      this.movePosY = ['top', 'bottom'][~~(Math.random() * 2)] as\n        | 'top'\n        | 'bottom';\n      setTimeout(() => {\n        const translateX = `${this.movePosX === 'left' ? '-' : ''}`;\n        const translateY = `${this.movePosY === 'top' ? '-' : ''}`;\n        this.btnTranslate = `translate(${translateX}${\n          50 + Math.random() * 50\n        }%, ${translateY}${50 + Math.random() * 50}%)`;\n        this.cdRef.markForCheck();\n        setTimeout(() => {\n          this.translate =\n            `translate(${translateX}50%, ${translateY}100%) ` +\n            `rotate(${\n              (this.movePosX === 'left' && this.movePosY === 'top') ||\n              (this.movePosX === 'right' && this.movePosY === 'bottom')\n                ? '-'\n                : ''\n            }30deg) ` +\n            `scale(1)`;\n          this.cdRef.markForCheck();\n        }, 500);\n      }, 10);\n      console.log(`按鈕在 ${this.day} 閃過了你${this.laughText ? `，${this.laughText}`: ''}`);\n    } else {\n      this.isLeave = true;\n      this.translate = '';\n      this.btnTranslate = '';\n      setTimeout(() => {\n        if (this.isLeave) {\n          this.movePosX = null;\n          this.movePosY = null;\n          this.cdRef.markForCheck();\n        }\n      }, 300);\n    }\n  }\n}\n\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MagicBtnComponent } from './magic-btn/magic-btn.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    MagicBtnComponent\n  ],\n  exports: [\n    MagicBtnComponent\n  ],\n})\nexport class MagicBoxModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}